---
title: "Epidemic Structure and Predictive Accuracy of Influenza A and B: Insights from Sub-Epidemic Modeling"
author: "Jake Harmon"
format: docx
bibliography: references.bib
execute: 
  warning: false
  echo: false
---

## Test

Test citation [@brauerModelsInfluenza2019] next [@centerfordiseasecontrolandpreventionLaboratoryConfirmedInfluenzaHospitalizations2025]

```{r}
library(tidyverse)
library(readr)
library(viridis) 

# Downloaded from https://gis.cdc.gov/grasp/fluview/FluHospChars.html
flu_df <- read_csv(
  file = (paste0(getwd(),"/data/Weekly_Data_Counts_by_Virus.csv")),
  skip = 1) %>% 
  rename(
    "season" = 1,
    "week_num" = 2,
    "flu_a" = 3,
    "flu_b" = 4,
    "flu_ab" = 5,
    "flu_u" = 6
  )

# For graphing
flu_time_series <- flu_df %>% 
  pivot_longer(cols = -c(season, week_num), names_to = "flu") %>% 
  filter(season == "2018-19")
flu_time_series$week_num <- factor(flu_time_series$week_num,
  levels = unique(flu_time_series$week_num)
)
flu_time_series$week_num <- as.numeric(flu_time_series$week_num)

# Create timeseries
ggplot(data = flu_time_series, aes(x = week_num, y = value, color = flu)) +
  geom_point() +
  geom_line() +
  labs(
    title = "Weekly Influenza A/B Counts, 2018-2019 Season",
    x = "Flu Week",
    y = "Number of Weekly Hospitalizations",
    color = "Virus Type"
  ) +
  scale_color_viridis(
    discrete = TRUE, 
    option = "D",
    labels = c(
      "flu_a" = "Influenza A",
      "flu_b" = "Influenza B",
      "flu_ab" = "Influenza A&B",
      "flu_u" = "Influenza Unspecified")) +
  theme_classic() 
```
